<div class="dashboard">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <div class="user-info">
      <span>Welcome, {{ currentUser?.first_name || currentUser?.username }}!</span>
      <button class="btn-logout" (click)="logout()">Logout</button>
    </div>
  </div>
  
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon members">
          <mat-icon>people</mat-icon>
        </div>
        <div class="stat-info">
          <h2>{{ totalMembers }}</h2>
          <p>Total Members</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon trainers">
          <mat-icon>fitness_center</mat-icon>
        </div>
        <div class="stat-info">
          <h2>{{ totalTrainers }}</h2>
          <p>Total Trainers</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon classes">
          <mat-icon>event</mat-icon>
        </div>
        <div class="stat-info">
          <h2>{{ totalClasses }}</h2>
          <p>Active Sessions</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon attendance">
          <mat-icon>check_circle</mat-icon>
        </div>
        <div class="stat-info">
          <h2>{{ todayAttendance }}</h2>
          <p>Completed Today</p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="content-grid">
    <mat-card class="recent-card">
      <mat-card-header>
        <mat-card-title>Recent Members</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          @for (member of recentMembers; track member.id) {
            <mat-list-item>
              <mat-icon matListItemIcon>person</mat-icon>
              <div matListItemTitle>{{ member.first_name }} {{ member.last_name }}</div>
              <div matListItemLine>{{ member.membership_type | uppercase }} - {{ member.email }}</div>
            </mat-list-item>
          } @empty {
            <p class="empty-state">No members found</p>
          }
        </mat-list>
      </mat-card-content>
    </mat-card>

    <mat-card class="recent-card">
      <mat-card-header>
        <mat-card-title>Upcoming Sessions</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          @for (session of upcomingSessions; track session.id) {
            <mat-list-item>
              <mat-icon matListItemIcon>event</mat-icon>
              <div matListItemTitle>{{ session.session_type | uppercase }} - {{ session.duration_minutes }}min</div>
              <div matListItemLine>{{ session.scheduled_date | date:'short' }} - ${{ session.price }}</div>
            </mat-list-item>
          } @empty {
            <p class="empty-state">No upcoming sessions</p>
          }
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
</div>
